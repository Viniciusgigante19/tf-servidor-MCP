import{j as e}from"./app.js";import{r as s}from"./index.js";import{b as p,c as h}from"./catchError.js";async function b(r,a){try{const{data:t}=await p.post("api/products",{name:r,price:Number(a)??0});return t}catch(t){return h(t)}}function g({onCreate:r}){const[a,t]=s.useState(""),[o,l]=s.useState(""),[c,i]=s.useState(null),d=n=>{l(n.target.value)},u=n=>{t(n.target.value)},x=async n=>{n.preventDefault();const m=await b(a,o);if("error"in m){i(m.error);return}t(""),l(""),i(null),r==null||r()};return e.jsx("div",{className:"col-12 col-lg-4",children:e.jsx("div",{className:"card border-0 shadow-sm rounded-4 h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title mb-3",children:"Cadastrar produto"}),c&&e.jsx("div",{className:"alert alert-danger py-2",children:c}),e.jsxs("form",{onSubmit:x,className:"vstack gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"prodName",className:"form-label",children:"Nome"}),e.jsx("input",{id:"prodName",className:"form-control w-100",placeholder:"Ex.: Teclado Mecânico",value:a,onChange:u})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"prodPrice",className:"form-label",children:"Preço"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",children:"R$"}),e.jsx("input",{id:"prodPrice",className:"form-control",placeholder:"Ex.: 199,90",value:o,onChange:d})]})]}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx("i",{className:"fa-solid fa-plus me-2","aria-hidden":"true"}),"Cadastrar"]})]})]})})})}const v=r=>(r/1e3).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),y=r=>new Date(r).toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit"});async function P(r){try{return await p.delete(`api/products/${r}`),null}catch(a){return h(a)}}const w=s.forwardRef(({children:r,onClick:a,classList:t=""},o)=>{const[l,c]=s.useState(!1),i=u=>{a==null||a()};s.useImperativeHandle(o,()=>({disable(){c(!0)},enable(){c(!1)}}));const d=["btn","btn-primary","btn-lg","px-4",t];return e.jsx("button",{disabled:l,className:d.join(" "),onClick:i,children:r})});export{w as B,g as P,y as a,v as f,P as p};
